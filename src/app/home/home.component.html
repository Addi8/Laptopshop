<app-header
  pageTitle="Laptopshop"
  helpTitle="Help text for home page"
></app-header>
<section
  class="headSection"
  fxLayout="row"
  fxLayoutAlign="start end"
  (scroll)="onWindowScroll($event)"
>
  <h3>Choose criteria <br />to filter results:</h3>
  <div class="searchInput">
    <form [formGroup]="globalForm" (ngSubmit)="onSubmit()">
      <mat-form-field>
        <input
          type="text"
          matInput
          placeholder="Enter search text ..."
          formControlName="globalSearch"
          name="searchValue"
        />
      </mat-form-field>
    </form>
  </div>
</section>

<section class="mainArea" fxLayout="row" fxLayoutAlign="start">
  <div class="widgetArea" fxLayout="column" fxLayoutAlign="start">
    <form [formGroup]="widgetForm" (ngSubmit)="onSubmit()">
      <mat-card fxLayout="column" formGroupName="brandName">
        <mat-card-title>Brand Name</mat-card-title>
        <div *ngFor="let brand of brands">
          <mat-checkbox
            (change)="onChange($event, 'brandName', 'brandNameValue')"
            [value]="brand.id"
            >{{ brand.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[0]"
          (change)="onInputChange($event,0)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[0]"
          (change)="onInputChange($event,0)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="chipsetBrand">
        <mat-card-title>Price</mat-card-title>
        <div *ngFor="let option of prices">
          <mat-checkbox
            (change)="onChange($event, 'price', 'priceRange')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[1]"
          (change)="onInputChange($event,1)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[1]"
          (change)="onInputChange($event,1)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="chipsetBrand">
        <mat-card-title>Rating</mat-card-title>
        <div *ngFor="let option of ratings">
          <mat-checkbox
            (change)="onChange($event, 'avgRating', 'avgRatingValue')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[2]"
          (change)="onInputChange($event,2)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[2]"
          (change)="onInputChange($event,2)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="chipsetBrand">
        <mat-card-title>Chipset Brand</mat-card-title>
        <div *ngFor="let option of chipsetBrands">
          <mat-checkbox
            (change)="onChange($event, 'chipsetBrand', 'chipsetBrandValue')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[3]"
          (change)="onInputChange($event,3)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[3]"
          (change)="onInputChange($event,3)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="chipsetBrand">
        <mat-card-title>Screen Size</mat-card-title>
        <div *ngFor="let option of screenSizes">
          <mat-checkbox
            (change)="onChange($event, 'screenSize', 'screenSizeRange')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[4]"
          (change)="onInputChange($event,4)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[4]"
          (change)="onInputChange($event,4)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="processorCount">
        <mat-card-title>Processor Type</mat-card-title>
        <div *ngFor="let option of processorCores">
          <mat-checkbox
            (change)="onChange($event, 'processorCount', 'processorCountValue')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[5]"
          (change)="onInputChange($event,5)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[5]"
          (change)="onInputChange($event,5)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="chipsetBrand">
        <mat-card-title>Processor Speed</mat-card-title>
        <div *ngFor="let option of processorSpeeds">
          <mat-checkbox
            (change)="onChange($event, 'processorSpeed', 'processorSpeedRange')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[6]"
          (change)="onInputChange($event,6)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[6]"
          (change)="onInputChange($event,6)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="hardDriveType">
        <mat-card-title>Hard Drive Type</mat-card-title>
        <div *ngFor="let option of hardDriveTypes">
          <mat-checkbox
            (change)="onChange($event, 'hardDriveType', 'hardDriveTypeValue')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[7]"
          (change)="onInputChange($event,7)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[7]"
          (change)="onInputChange($event,7)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="hardDriveSize">
        <mat-card-title>Hard Drive Size</mat-card-title>
        <div *ngFor="let option of hardDriveSizes">
          <mat-checkbox
            (change)="onChange($event, 'hardDriveSize', 'hardDriveSizeRange')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[8]"
          (change)="onInputChange($event,8)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[8]"
          (change)="onInputChange($event,8)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="operatingSystem">
        <mat-card-title>Operating System</mat-card-title>
        <div *ngFor="let option of operatingSystems">
          <mat-checkbox
            (change)="
              onChange($event, 'operatingSystem', 'operatingSystemValue')
            "
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[9]"
          (change)="onInputChange($event,9)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[9]"
          (change)="onInputChange($event,9)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="ram">
        <mat-card-title>Ram Size</mat-card-title>
        <div *ngFor="let option of ramOptions">
          <mat-checkbox
            (change)="onChange($event, 'ram', 'ramValue')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[10]"
          (change)="onInputChange($event,10)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[10]"
          (change)="onInputChange($event,10)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card fxLayout="column" formGroupName="itemWeight">
        <mat-card-title>Weight</mat-card-title>
        <div *ngFor="let option of weights">
          <mat-checkbox
            (change)="onChange($event, 'itemWeight', 'itemWeightRange')"
            [value]="option.id"
            >{{ option.name }}</mat-checkbox
          >
        </div>
        <mat-slider
          formControlName="weight"
          color="primary"
          min="1"
          max="5"
          step="1"
          *ngIf="!arr[11]"
          (change)="onInputChange($event,11)"
        ></mat-slider>
        <mat-slider
          formControlName="weight"
          color="warn"
          min="1"
          max="5"
          step="1"
          value="5"
          *ngIf="arr[11]"
          (change)="onInputChange($event,11)"
        ></mat-slider>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <span>optional</span>
          <span>must have</span>
        </div>
      </mat-card>

      <mat-card-actions>
        <button mat-raised-button type="submit" color="primary">Search</button>
      </mat-card-actions>
    </form>
  </div>

  <div class="listArea" fxLayout="column" fxLayoutAlign="start">
    <mat-form-field>
      <input
        matInput
        (keyup)="applyFilter($event.target.value)"
        placeholder="Filter"
      />
    </mat-form-field>

    <table mat-table [dataSource]="dataSource" matSort *ngIf="laptops">
      <ng-container matColumnDef="image">
        <th mat-header-cell *matHeaderCellDef>Product Image</th>
        <td
          mat-cell
          *matCellDef="let element"
          [routerLink]="['/details', element.asin]"
        >
          <img
            style="width:120px"
            src="{{ element.imagePath }}"
            alt="Product Image"
          />
        </td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td
          mat-cell
          *matCellDef="let element"
          [routerLink]="['/details', element.asin]"
        >
          {{ element.productTitle }}
        </td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Price</th>
        <td mat-cell *matCellDef="let element">{{ element.price }} € <br /></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[5, 10, 20]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
  <!-- <div *ngFor="let star of ratings">
    <mat-icon color="warn" aria-hidden="false" aria-label="star rating"
      >star</mat-icon
    >
  </div> -->
</section>
